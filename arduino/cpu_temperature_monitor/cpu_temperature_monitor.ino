#include <Adafruit_GFX.h>    // Core graphics library
#include <Adafruit_ST7735.h> // Hardware-specific library for ST7735
#include <SPI.h>


// Define pins for SPI0 on Raspberry Pi Pico
#define TFT_CS    10 // Chip select
#define TFT_DC    9  // Data/Command
#define TFT_RST   8  // Reset
#define TFT_BL    7  // Backlight control pin
#define TFT_MOSI  11 // MOSI (Data out)
#define TFT_SCLK  13 // SCK (Clock out)



#define DISPLAY_WIDTH 128  // Width of the OLED screen in pixels
#define DISPLAY_HEIGHT 64  // Height of the OLED screen in pixels

Adafruit_ST7735 display = Adafruit_ST7735(TFT_CS, TFT_DC, TFT_RST);
float temp = 0;

#define SPLASH_SCREEN_HEIGHT 64
#define SPLASH_SCREEN_WIDTH 128
static const unsigned char PROGMEM splash_screen_bmp[] =
{ 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x3f, 0xdf, 0xef, 0x1e, 0xfe, 0x7f, 0xbf, 0x81, 0xe1, 0xfe, 0xf7, 0xbf, 0x87, 0xf8, 0x01,
  0x80, 0x26, 0x4c, 0x27, 0xbc, 0x63, 0x30, 0x98, 0xc1, 0xe1, 0x32, 0x63, 0x18, 0xc3, 0x08, 0x01,
  0x80, 0x26, 0x4c, 0x26, 0xec, 0x63, 0x30, 0x98, 0xc1, 0x21, 0x32, 0x63, 0x18, 0xc3, 0x08, 0x01,
  0x80, 0x26, 0x4c, 0x86, 0x4c, 0x63, 0x32, 0x18, 0xc3, 0x31, 0x32, 0x63, 0x18, 0xc3, 0x20, 0x01,
  0x80, 0x06, 0x0f, 0x86, 0x0c, 0x63, 0x3e, 0x1f, 0x03, 0x30, 0x30, 0x63, 0x1f, 0x03, 0xe0, 0x01,
  0x80, 0x06, 0x0c, 0x86, 0x0c, 0x7e, 0x32, 0x19, 0x83, 0xf0, 0x30, 0x63, 0x19, 0x83, 0x20, 0x01,
  0x80, 0x06, 0x0c, 0x26, 0x0c, 0x60, 0x30, 0x98, 0xc6, 0x18, 0x30, 0x63, 0x18, 0xc3, 0x08, 0x01,
  0x80, 0x06, 0x0c, 0x26, 0x0c, 0x60, 0x30, 0x98, 0xc6, 0x18, 0x30, 0x63, 0x18, 0xc3, 0x08, 0x01,
  0x80, 0x1f, 0x9f, 0xef, 0xbe, 0xfc, 0x7f, 0xbe, 0x6f, 0x3c, 0xfc, 0x3e, 0x3e, 0x77, 0xf8, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x78, 0xf1, 0xf0, 0xe7, 0x8f, 0xf3, 0xfc, 0x1f, 0x0f, 0xe0, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x3d, 0xe3, 0x18, 0x63, 0x01, 0x82, 0x64, 0x31, 0x86, 0x30, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x37, 0x66, 0x0c, 0x73, 0x01, 0x82, 0x64, 0x60, 0xc6, 0x30, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x32, 0x66, 0x0c, 0x7b, 0x01, 0x82, 0x64, 0x60, 0xc6, 0x30, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x30, 0x66, 0x0c, 0x6b, 0x01, 0x80, 0x60, 0x60, 0xc7, 0xc0, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x30, 0x66, 0x0c, 0x6f, 0x01, 0x80, 0x60, 0x60, 0xc6, 0x60, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x30, 0x66, 0x0c, 0x67, 0x01, 0x80, 0x60, 0x60, 0xc6, 0x30, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x30, 0x63, 0x18, 0x63, 0x01, 0x80, 0x60, 0x31, 0x86, 0x30, 0x00, 0x00, 0x01,
  0x80, 0x00, 0x00, 0x7d, 0xf1, 0xf0, 0xf3, 0x0f, 0xf1, 0xf8, 0x1f, 0x0f, 0x9c, 0x00, 0x00, 0x01,
  0x80, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x12, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x21, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x21, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x7c, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x70, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x70, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x00, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x2d, 0x00, 0x0c, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x4c, 0x80, 0x0c, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x9e, 0x40, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x81, 0x3f, 0x20, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x81, 0x7f, 0xa0, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x81, 0x7f, 0xa0, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x81, 0x7f, 0xa0, 0x0c, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x81, 0x3f, 0x20, 0x0c, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0x80, 0x9e, 0x40, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x13, 0xed, 0x49,
  0x80, 0x40, 0x80, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2a, 0xa9, 0x55,
  0x80, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3a, 0xad, 0xdd,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2a, 0xa8, 0x55,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x2a, 0xad, 0xd5,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff
};

void setup() {
  display.initR(INITR_MINI160x80_PLUGIN);  // Init ST7735S mini display
  display.setRotation(1);
  display.fillScreen(ST77XX_WHITE);
  display.setTextColor(ST77XX_WHITE);
  display.drawBitmap(0, 0, splash_screen_bmp, 128, 64, 1);  //Displays the Splash Screen
  delay(3000); 
}

void loop() {
  temp = tempmonGetTemp();
  display.fillScreen(ST77XX_BLUE);
  display.drawRect(2, 2, 126, 62, ST77XX_WHITE);
  display.setTextSize(2);
  display.setCursor(15, 15);
  display.println("CPU Temp:");
  display.setTextSize(2);
  display.setCursor(25, 35);
  display.println(String(temp, 2));
  display.setCursor(90, 35);
  display.print("C");
  delay(750);   //Small delay between the readings
}
